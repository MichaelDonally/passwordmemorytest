 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
            <title>Login Page</title>
        </head>
        
        <body>
            <div>
                <font size="40"><label id="passworddisplay"></label></font>
            </div>
           
            <div id="login" style="display: none;"> 
                <label for="password">Password:</label>
                <input type="password" id="password" name="password">
                <div id="lower">
                    <button onclick="submitPassword()">Submit</button>
                </div>
            </div>
            <button id="togview" onclick="toggleView()">Ready</button>
            
        </body>
        
        <script>
            var startMemory, endMemory;
            var user, password;
        
            function toggleView() { 
                endMemory = new Date();
                console.log('user: '+user+' - password: '+password);
                $('#passworddisplay').hide();
                $('#login').show();
                $('#togview').hide();
            }
            
            function submitPassword() {
                var entered = $('#password').val();
                $('#password').val('');
                
                console.log(entered);
                var req = {
                    user: user,
                    start: startMemory.toISOString(),
                    mid: endMemory.toISOString(),
                    end: (new Date()).toISOString(),
                    status: ''+((entered==password) ? 'success' : 'fail'),
                    entered: entered,
                    pass: password
                }
                
                $.post('loginattempt', req, function(data) {
                    console.log(data);
                });
                
                resetPage();
            }
            
            $(document).ready(function() {
                resetPage();                
            });
            
            function resetPage() {
                startMemory = new Date();
                
                $.get('getpassword', function(data) {
                    user = data.userId;
                    password = data.password;
                    $('#passworddisplay').text(password);
                    
                    $('#passworddisplay').show();
                    $('#login').hide();
                    $('#togview').show();
                });
            }
        </script>
        
    </html>